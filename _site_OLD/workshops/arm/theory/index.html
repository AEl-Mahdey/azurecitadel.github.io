<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Authoring ARM Templates • Azure Citadel</title>
    
    <meta name="keywords" content="authoring, arm, workshop, hackathon, lab, template">
    
    	<!-- Twitter Cards -->
	<meta name="twitter:title" content="Authoring ARM Templates">
	
	<meta name="twitter:site" content="@https://twitter.com/adambohle">
	
	
	<meta name="twitter:card" content="summary">
	<meta name="twitter:image" content="http://localhost:4000/images/MSLogo.jpg">
	
	<!-- Open Graph -->
	<meta property="og:locale" content="en">
	<meta property="og:type" content="article">
	<meta property="og:title" content="Authoring ARM Templates">
	
	<meta property="og:url" content="http://localhost:4000/workshops/arm/theory/">
	<meta property="og:site_name" content="Azure Citadel">

    <link rel="canonical" href="http://localhost:4000/workshops/arm/theory/">

    <link href="http://localhost:4000/atom.xml" type="application/atom+xml" rel="alternate" title="Azure Citadel Atom Feed">
    <link href="http://localhost:4000/sitemap.xml" type="application/xml" rel="sitemap" title="Sitemap">

    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="cleartype" content="on">

    <link rel="stylesheet" href="http://localhost:4000/css/main.css">
    <!-- HTML5 Shiv and Media Query Support for IE -->
    <!--[if lt IE 9]>
      <script src="http://localhost:4000/js/vendor/html5shiv.min.js"></script>
      <script src="http://localhost:4000/js/vendor/respond.min.js"></script>
    <![endif]-->

    <link rel="stylesheet" type="text/css" href="/slick/slick.css"/>
    <link rel="stylesheet" type="text/css" href="/slick/slick-theme.css"/>

  </head>

  <body id="js-body">
    <!--[if lt IE 9]><div class="upgrade notice-warning"><strong>Your browser is quite old!</strong> Why not <a href="http://whatbrowser.org/">upgrade to a newer one</a> to better enjoy this site?</div><![endif]-->

      <header id="masthead">
  <div class="inner-wrap">
    <a href="http://localhost:4000/" class="site-title">Azure Citadel</a>
    <nav role="navigation" class="menu top-menu">
        <ul class="menu-item">
	<li class="home"><a href="/">Azure Citadel</a></li>
	
    
    <li><a href="http://localhost:4000/workshops/" >Workshops</a></li>
  
    
    <li><a href="http://localhost:4000/demos/" >Demos</a></li>
  
    
    <li><a href="http://localhost:4000/labs/" >Labs</a></li>
  
    
    <li><a href="http://localhost:4000/guides/" >Guides</a></li>
  
    
    <li><a href="http://localhost:4000/blog/" >Blog</a></li>
  
</ul>
    </nav>
  </div><!-- /.inner-wrap -->
</header><!-- /.masthead -->
    <nav role="navigation" id="js-menu" class="sliding-menu-content">
  <h5>Azure Citadel <span>Table of Contents</span></h5>
  <ul class="menu-item">
    <li>
      <a href="http://localhost:4000/workshops/">
        
        <div class="title">Workshops</div>
        <p class="excerpt">Interactive Workshops</p>
      </a>
    </li><li>
      <a href="http://localhost:4000/demos/">
        
        <div class="title">Demos</div>
        <p class="excerpt">Guided Demos</p>
      </a>
    </li><li>
      <a href="http://localhost:4000/labs/">
        
        <div class="title">Labs</div>
        <p class="excerpt">Hands On Labs</p>
      </a>
    </li><li>
      <a href="http://localhost:4000/guides/">
        
        <div class="title">Guides</div>
        <p class="excerpt">Tech Guides</p>
      </a>
    </li><li>
      <a href="http://localhost:4000/blog/">
        
        <div class="title">Blog</div>
        <p class="excerpt">Blog Posts</p>
      </a>
    </li>
  </ul>
</nav>
<button type="button" id="js-menu-trigger" class="sliding-menu-button lines-button x2" role="button" aria-label="Toggle Navigation">
  <span class="nav-lines"></span>
</button>

<div id="js-menu-screen" class="menu-screen"></div>


    <div id="page-wrapper">
      <div id="main" role="main">
	<article class="wrap" itemscope itemtype="http://schema.org/Article">
		
		
		<div class="page-title">
			<h1>Authoring ARM Templates</h1>
		</div>
		<div class="inner-wrap">
			<div id="content" class="page-content" itemprop="articleBody">
				<p>Understanding the theory behind Azure Resource Manager.</p>

<nav class="toc">
<ul id="markdown-toc">
  <li><a href="#background" id="markdown-toc-background">Background</a></li>
  <li><a href="#resources-resource-groups-and-resource-providers" id="markdown-toc-resources-resource-groups-and-resource-providers">Resources, resource groups and resource providers</a></li>
  <li><a href="#resource-explorer" id="markdown-toc-resource-explorer">Resource Explorer</a></li>
  <li><a href="#azure-resource-manager-json-template-format" id="markdown-toc-azure-resource-manager-json-template-format">Azure Resource Manager JSON template format</a></li>
</ul>

</nav>

<h2 id="background">Background</h2>

<p>Azure Resource Manager, or ARM, is the dominant deployment type for Azure, spanning the public clouds, government clouds and Azure Stack private cloud deployments.  It superseded the Azure Service Manager which is expected to be slowly deprecated over time, and will be ignored in this lab except as a comparison point.</p>

<h2 id="resources-resource-groups-and-resource-providers">Resources, resource groups and resource providers</h2>

<p>If you have used the ARM portal (<a href="http://portal.azure.com">http://portal.azure.com</a>), then you will be familiar with deploying various resources into resource groups.  Resource groups are designed as a natural management point for related resources, based on groupings, linked lifecycle, use case, billing aggregation, role based access control, etc.</p>

<p>The resources themselves are provided by <a href="https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-overview#resource-providers">resource providers</a>.  Each <em>resource provider</em> will provider one or more <em>resource types</em>. To see which providers are registered (and unregistered) on your subscription, use the CLI 2.0 command below:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>az provider list --output table

Namespace                               RegistrationState
--------------------------------------  -------------------
Microsoft.Advisor                       Registered
Microsoft.ApiManagement                 Registered
Microsoft.Automation                    Registered
Microsoft.Cache                         Registered
Microsoft.Cdn                           Registered
Microsoft.Compute                       Registered
Microsoft.ContainerRegistry             Registered
Microsoft.ContainerService              Registered
...
</code></pre>
</div>

<p>Type <code class="highlighter-rouge">az provider show --namespace Microsoft.Network</code> to view the JSON detail of a resource provider.  Note</p>
<ul>
  <li>the ID is specific to your subscription</li>
  <li>each resource type has numerous API versions relecting the innovation within Azure</li>
  <li>will be supported in a number of named locations, or will be specified as a global service</li>
</ul>

<h2 id="resource-explorer">Resource Explorer</h2>

<p>You can see the definitions of the resources, resource groups and resource providers in use within your subscription in the resource explorer (<a href="http:/resources.azure.com">http:/resources.azure.com</a>).</p>

<p>Drill into an existing resource group and select the resources within it and the unique <em>id</em> will reflect:</p>
<ul>
  <li>the subscription id</li>
  <li>resource group name</li>
  <li>resource provider and type</li>
  <li>and the resource name itself</li>
</ul>

<p>The <em>type</em> is the resource type in the <em>Resource.Provider/resourceType</em> naming type, e.g. “Microsoft.Logic/workflows”</p>

<p><img src="../images/armResourceExplorer.png" alt="" /></p>

<h2 id="azure-resource-manager-json-template-format">Azure Resource Manager JSON template format</h2>

<p>The ARM template format is JSON format.</p>

<p>Note that the curly brace objects in JSON contain key:value pairs.  The value in the key:value pair can also be another object.  Square brackets are another object type, and contain lists of unnamed (but indexed) objects.</p>

<p>Here is an empty template to show the structure.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"$schema"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"contentVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"variables"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"outputs"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>Sections:</p>
<ul>
  <li><strong>schema</strong>: JSON schema that describes the template format</li>
  <li><strong>contentVersion</strong>: version of the schema</li>
  <li><strong>parameters</strong>: inputs</li>
  <li><strong>variables</strong>: used within the template to simplify the resources later</li>
  <li><strong>resources</strong>: list of resources to deploy</li>
  <li><strong>outputs</strong>: output JSON information</li>
</ul>

<p>Of these, the schema and contentVersion are mandatory, as are the resources.  Parameters and variables are almost always included. Outputs are rarer, and only really used when nesting templates.  More on that later.</p>


				<hr />
				<footer class="page-footer">
					
					<div class="inline-btn">
	<a class="btn-social twitter" href="https://twitter.com/intent/tweet?text=Authoring%20ARM%20Templates&amp;url=http://localhost:4000/workshops/arm/theory/&amp;via=https://twitter.com/adambohle" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i> Share on Twitter</a>
	<a class="btn-social facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/workshops/arm/theory/" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i> Share on Facebook</a>
	<a class="btn-social linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=http://localhost:4000/workshops/arm/theory/" class="btn btn--linkedin" title="Share on LinkedIn"><i class="fa fa-fw fa-linkedin" aria-hidden="true"></i>Share on LinkedIn</a>
</div><!-- /.share-this -->

	<!-- <a class="btn-social linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=http://localhost:4000/workshops/arm/theory/" class="btn btn--linkedin" title="Share on LinkedIn"><i class="fa fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a> -->


					<div class="page-meta">
	<p>Updated <time datetime="2017-07-04T00:00:00Z" itemprop="datePublished">July 04, 2017</time></p>
</div><!-- /.page-meta -->
				</footer><!-- /.footer -->
				<aside>
					<hr />
<div id="disqus_thread"></div>
<script type="text/javascript">
	/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
	var disqus_shortname = 'https-ukpducim-github-io';

	/* * * DON'T EDIT BELOW THIS LINE * * */
	(function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

				</aside>
			</div><!-- /.content -->
		</div><!-- /.inner-wrap -->
		
	</article><!-- ./wrap -->
</div><!-- /#main -->

      <footer role="contentinfo" id="site-footer">
	<nav role="navigation" class="menu bottom-menu">
		<ul class="menu-item">
		
      
			<li><a href="https://azurecitadel.github.io" target="_blank">Azure Citadel</a></li>
		
      
			<li><a href="http://localhost:4000/workshops/" >Workshops</a></li>
		
      
			<li><a href="http://localhost:4000/demos/" >Demos</a></li>
		
      
			<li><a href="http://localhost:4000/labs/" >Labs</a></li>
		
      
			<li><a href="http://localhost:4000/guides/" >Guides</a></li>
		
      
			<li><a href="http://localhost:4000/blogs/" >Blog</a></li>
		
		</ul>
	</nav><!-- /.bottom-menu -->
	<p class="copyright">&#169; 2017 <a href="http://localhost:4000">Azure Citadel</a> powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> + <a href="http://mmistakes.github.io/skinny-bones-jekyll/" rel="nofollow">Skinny Bones</a>.</p>
</footer>
    </div>

    <script src="http://localhost:4000/js/vendor/jquery-1.9.1.min.js"></script>
    <script src="http://localhost:4000/js/main.js"></script>
    <!--script type="text/javascript" src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script-->
    <script type="text/javascript" src="/slick/slick.min.js"></script>

    <script>
      $(document).ready(function () {
        $('.carousel').slick({
          autoplay: true,
          arrows: true,
          dots: true
        });
      });
    </script>

  </body>

</html>
