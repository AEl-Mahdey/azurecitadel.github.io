<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Azure 101 Virtual Machine Lab • Azure Citadel</title>
    
    <meta name="keywords" content="azure, 101, vm, virtual, machine, linux, windows, template">
    
    	<!-- Twitter Cards -->
	<meta name="twitter:title" content="Azure 101 Virtual Machine Lab">
	
	<meta name="twitter:site" content="@https://twitter.com/adambohle">
	
	
	<meta name="twitter:card" content="summary">
	<meta name="twitter:image" content="http://localhost:4000/images/MSLogo.jpg">
	
	<!-- Open Graph -->
	<meta property="og:locale" content="en">
	<meta property="og:type" content="article">
	<meta property="og:title" content="Azure 101 Virtual Machine Lab">
	
	<meta property="og:url" content="http://localhost:4000/workshops/azure101/VMLab/">
	<meta property="og:site_name" content="Azure Citadel">

    <link rel="canonical" href="http://localhost:4000/workshops/azure101/VMLab/">

    <link href="http://localhost:4000/atom.xml" type="application/atom+xml" rel="alternate" title="Azure Citadel Atom Feed">
    <link href="http://localhost:4000/sitemap.xml" type="application/xml" rel="sitemap" title="Sitemap">

    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="cleartype" content="on">

    <link rel="stylesheet" href="http://localhost:4000/css/main.css">
    <!-- HTML5 Shiv and Media Query Support for IE -->
    <!--[if lt IE 9]>
      <script src="http://localhost:4000/js/vendor/html5shiv.min.js"></script>
      <script src="http://localhost:4000/js/vendor/respond.min.js"></script>
    <![endif]-->

    <link rel="stylesheet" type="text/css" href="/slick/slick.css"/>
    <link rel="stylesheet" type="text/css" href="/slick/slick-theme.css"/>

  </head>

  <body id="js-body">
    <!--[if lt IE 9]><div class="upgrade notice-warning"><strong>Your browser is quite old!</strong> Why not <a href="http://whatbrowser.org/">upgrade to a newer one</a> to better enjoy this site?</div><![endif]-->

      <header id="masthead">
  <div class="inner-wrap">
    <a href="http://localhost:4000/" class="site-title">Azure Citadel</a>
    <nav role="navigation" class="menu top-menu">
        <ul class="menu-item">
	<li class="home"><a href="/">Azure Citadel</a></li>
	
    
    <li><a href="http://localhost:4000/workshops/" >Workshops</a></li>
  
    
    <li><a href="http://localhost:4000/demos/" >Demos</a></li>
  
    
    <li><a href="http://localhost:4000/labs/" >Labs</a></li>
  
    
    <li><a href="http://localhost:4000/guides/" >Guides</a></li>
  
    
    <li><a href="http://localhost:4000/blog/" >Blog</a></li>
  
</ul>
    </nav>
  </div><!-- /.inner-wrap -->
</header><!-- /.masthead -->
    <nav role="navigation" id="js-menu" class="sliding-menu-content">
  <h5>Azure Citadel <span>Table of Contents</span></h5>
  <ul class="menu-item">
    <li>
      <a href="http://localhost:4000/workshops/">
        
        <div class="title">Workshops</div>
        <p class="excerpt">Interactive Workshops</p>
      </a>
    </li><li>
      <a href="http://localhost:4000/demos/">
        
        <div class="title">Demos</div>
        <p class="excerpt">Guided Demos</p>
      </a>
    </li><li>
      <a href="http://localhost:4000/labs/">
        
        <div class="title">Labs</div>
        <p class="excerpt">Hands On Labs</p>
      </a>
    </li><li>
      <a href="http://localhost:4000/guides/">
        
        <div class="title">Guides</div>
        <p class="excerpt">Tech Guides</p>
      </a>
    </li><li>
      <a href="http://localhost:4000/blog/">
        
        <div class="title">Blog</div>
        <p class="excerpt">Blog Posts</p>
      </a>
    </li>
  </ul>
</nav>
<button type="button" id="js-menu-trigger" class="sliding-menu-button lines-button x2" role="button" aria-label="Toggle Navigation">
  <span class="nav-lines"></span>
</button>

<div id="js-menu-screen" class="menu-screen"></div>


    <div id="page-wrapper">
      <div id="main" role="main">
	<article class="wrap" itemscope itemtype="http://schema.org/Article">
		
		
		<div class="page-title">
			<h1>Azure 101 Virtual Machine Lab</h1>
		</div>
		<div class="inner-wrap">
			<div id="content" class="page-content" itemprop="articleBody">
				<p>Virtual machine lab for the Azure 101 workshop.</p>

<nav class="toc">
<ul id="markdown-toc">
  <li><a href="#introduction" id="markdown-toc-introduction">Introduction</a></li>
  <li><a href="#info-for-the-windows-vm-quickstart" id="markdown-toc-info-for-the-windows-vm-quickstart">Info for the Windows VM quickstart</a></li>
  <li><a href="#info-for-the-linux-vm-quickstart" id="markdown-toc-info-for-the-linux-vm-quickstart">Info for the Linux VM quickstart</a></li>
  <li><a href="#quick-navigate" id="markdown-toc-quick-navigate">Quick Navigate</a></li>
</ul>

</nav>

<h2 id="introduction">Introduction</h2>

<p>This lab will create either a Windows or Linux virtual machine, but the real reason for its existence is to introduce you to the wide number of tutorials that are available for Azure.</p>

<p>Go to the Azure Docs area, and click on <em>Windows Virtual Machines</em> in the Deploy Infrastructure section of the Get Started tab. Take a look at the five minute quickstarts.  There is one for the portal, for PowerShell or for CLI 2.0.  There are equivalent sets for Linux virtual machines.</p>

<p><strong><em>You may now choose to create either a Windows or Linux virtual machine.  You may also choose to create it via the portal, CLI 2.0 or PowerShell.  Please read the notes below before beginning.</em></strong></p>

<p>Notes:</p>
<ul>
  <li>The sections below show the parameters recommended for either Windows or Linux VMs</li>
  <li>If running short on time then the steps to install a web service (IIS for Windows, NGINX for Linux) should be considered optional</li>
  <li>The Linux portal steps below include fuller details on using an SSH key pair rather than a password</li>
  <li>For those using CLI 2.0 then use the bash shell in Windows 10 if you have it configured.  If not then click on the Cloud Shell icon in the portal and run the commands from within there.</li>
  <li>If you have followed the portal customisation lab then you will also have links to some of the quickstarts directly on your dashboard</li>
  <li>The 5 minute quickstarts are supplemented by additional VM tutorials available on disks, DSC, images, scale sets, load balancing, backup, monitoring, policies, etc.</li>
</ul>

<hr />

<h2 id="info-for-the-windows-vm-quickstart">Info for the Windows VM quickstart</h2>

<h3 id="parameters-for-the-windows-vm">Parameters for the Windows VM</h3>

<p>Follow the Windows VM 5 minute quickstart and create a Windows Server 2016 Datacenter server with the following parameters:</p>
<ul>
  <li><strong>Name:</strong> <em>myWindowsVM</em></li>
  <li><strong>VM disk type:</strong> <em>SSD</em></li>
  <li><strong>Resource Group:</strong> Existing <em>Azure101IaaS</em> resource group</li>
  <li><strong>Location:</strong> <em>West Europe</em></li>
  <li><strong>Size:</strong> <em>DS1_v2</em></li>
  <li><strong>Use Managed Disks:</strong> <em>Yes</em></li>
</ul>

<p><img src="../images/Az101-CreateVM.JPG" alt="" /></p>

<h3 id="if-you-have-time">If you have time:</h3>

<p>Research the following:</p>
<ul>
  <li>Azure Hybrid Use Benefit</li>
  <li>Benefits of Managed Disks vs manual storage accounts</li>
  <li>Deallocation vs shutdown in the remote desktop console</li>
</ul>

<hr />

<h2 id="info-for-the-linux-vm-quickstart">Info for the Linux VM quickstart</h2>

<h3 id="create-your-ssh-keypair">Create your SSH keypair</h3>

<p>Run the following commands in your Bash shell:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>cd ~
umask 033
ssh-keygen -t rsa -b 2048 -C "richard.cheney@microsoft.com"
ls -Al .ssh
cat .ssh/id_rsa.pub
</code></pre>
</div>

<p>The -C is a comment. It is good etiquette to add in your email address so that any key owners are easily identified. You will be prompted for a filename. You can specify an alternative name, or hit enter to use the defaults (recommended). For the passphrase, it is best practice to provide a passphrase with a few memorable but disassociated words.</p>

<p>However, for the sake of this exercise you may simply press enter for an empty passphrase, and then you won’t be challenged for it later when using ssh to connect to the Linux VM.</p>

<p>Copy the contents of the id_rsa.pub file to the clipboard as you will
use this later.</p>

<h3 id="parameters-for-the-linux-vm">Parameters for the Linux VM</h3>

<p>Follow the Linux VM quickstart to create an Ubuntu Server 16.04 LTS server with the following parameters:</p>
<ul>
  <li><strong>Name:</strong> <em>myLinuxVM</em></li>
  <li><strong>VM disk type:</strong> <em>HDD</em></li>
  <li><strong>SSH Public Key:</strong> Copy and pasted from cat ~/.ssh/id_rsa.pub</li>
  <li><strong>Resource Group:</strong> Existing <em>Azure101IaaS</em> resource group</li>
  <li><strong>Location:</strong> <em>West Europe</em></li>
  <li><strong>Size:</strong> <em>D1_v2</em></li>
  <li><strong>Subnet:</strong> <em>dbSubnet</em></li>
  <li><strong>Availability Set:</strong> Create <em>myLinuxAS</em></li>
</ul>

<p><em>Do not</em> click on Create straight away. Let’s explore templates a
little.</p>

<h3 id="templates">Templates</h3>

<ul>
  <li>Click on <em>Download template and parameters</em>. Browse the template JSON, the parameters JSON, and the scripts to deploy the template from PowerShell and CLI 2.0. <img src="../images/Az101-ARMTemplate.JPG" alt="" /></li>
  <li>Click on Create to submit the job</li>
</ul>

<p>Once the VM has been created then use the Bash shell to open a secure shell session:</p>
<ul>
  <li>SSH to the VM’s public IP address: ssh &lt;adminuser&gt;@&lt;public IP address&gt;</li>
</ul>

<h3 id="if-you-have-time-1">If you have time:</h3>
<ul>
  <li>Browse to the Services tab on Azure Docs, and then find the Azure Resource Manager tile in the Monitoring + Management area. Discover the <a href="https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-manager-export-template">export template</a> functionality, as well as the JSON <a href="https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-authoring-templates">template structure</a>.</li>
  <li>Click on Add within the Azure101IaaS Resource Group, and find <em>Template Deployment</em></li>
  <li>In the <em>Load a GitHub Quickstart</em> template, type “load” and select one of the community templates and accompanying parameters file</li>
  <li>Search the <a href="https://github.com/Azure/azure-quickstart-templates">Azure Quickstart Templates</a> GitHub repo to find the same template</li>
</ul>

<hr />
<h2 id="quick-navigate">Quick Navigate</h2>
<ul>
  <li>Back up to <a href="./azure101Index.md/#introduction"><strong>Azure 101</strong></a> main page
    <ul>
      <li><a href="./azure101PortalLab.md/#introduction">Lab: <strong>Using the portal and creating a vNet</strong></a></li>
      <li><a href="./azure101VMLab.md/#introduction">Lab: <strong>Windows and Linux VMs</strong></a></li>
      <li><a href="./azure101WebAppLab.md/#introduction">Lab: <strong>Deploying to Web Apps from GitHub</strong></a></li>
      <li><a href="./azure101LogicAppLab.md/#introduction">Lab: <strong>Using Logic Apps</strong></a></li>
    </ul>
  </li>
</ul>

				<hr />
				<footer class="page-footer">
					
					<div class="inline-btn">
	<a class="btn-social twitter" href="https://twitter.com/intent/tweet?text=Azure%20101%20Virtual%20Machine%20Lab&amp;url=http://localhost:4000/workshops/azure101/VMLab/&amp;via=https://twitter.com/adambohle" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i> Share on Twitter</a>
	<a class="btn-social facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/workshops/azure101/VMLab/" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i> Share on Facebook</a>
	<a class="btn-social linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=http://localhost:4000/workshops/azure101/VMLab/" class="btn btn--linkedin" title="Share on LinkedIn"><i class="fa fa-fw fa-linkedin" aria-hidden="true"></i>Share on LinkedIn</a>
</div><!-- /.share-this -->

	<!-- <a class="btn-social linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=http://localhost:4000/workshops/azure101/VMLab/" class="btn btn--linkedin" title="Share on LinkedIn"><i class="fa fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a> -->


					<div class="page-meta">
	<p>Updated <time datetime="2017-08-29T00:00:00Z" itemprop="datePublished">August 29, 2017</time></p>
</div><!-- /.page-meta -->
				</footer><!-- /.footer -->
				<aside>
					<hr />
<div id="disqus_thread"></div>
<script type="text/javascript">
	/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
	var disqus_shortname = 'https-ukpducim-github-io';

	/* * * DON'T EDIT BELOW THIS LINE * * */
	(function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

				</aside>
			</div><!-- /.content -->
		</div><!-- /.inner-wrap -->
		
	</article><!-- ./wrap -->
</div><!-- /#main -->

      <footer role="contentinfo" id="site-footer">
	<nav role="navigation" class="menu bottom-menu">
		<ul class="menu-item">
		
      
			<li><a href="https://azurecitadel.github.io" target="_blank">Azure Citadel</a></li>
		
      
			<li><a href="http://localhost:4000/workshops/" >Workshops</a></li>
		
      
			<li><a href="http://localhost:4000/demos/" >Demos</a></li>
		
      
			<li><a href="http://localhost:4000/labs/" >Labs</a></li>
		
      
			<li><a href="http://localhost:4000/guides/" >Guides</a></li>
		
      
			<li><a href="http://localhost:4000/blogs/" >Blog</a></li>
		
		</ul>
	</nav><!-- /.bottom-menu -->
	<p class="copyright">&#169; 2017 <a href="http://localhost:4000">Azure Citadel</a> powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> + <a href="http://mmistakes.github.io/skinny-bones-jekyll/" rel="nofollow">Skinny Bones</a>.</p>
</footer>
    </div>

    <script src="http://localhost:4000/js/vendor/jquery-1.9.1.min.js"></script>
    <script src="http://localhost:4000/js/main.js"></script>
    <!--script type="text/javascript" src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script-->
    <script type="text/javascript" src="/slick/slick.min.js"></script>

    <script>
      $(document).ready(function () {
        $('.carousel').slick({
          autoplay: true,
          arrows: true,
          dots: true
        });
      });
    </script>

  </body>

</html>
